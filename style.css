
:root{
  --bg:#f7fbfb;
  --card:#ffffff;
  --muted:#6b7280;
  --text:#0f172a;
  --primary:#0f766e;
  --accent:linear-gradient(90deg,#0ea5a4 0%,#06b6d4 100%);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background:var(--bg);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

.container{max-width:1100px;margin:0 auto;padding:0}

.site-header{background:transparent;position:sticky;top:0;z-index:40;padding:18px 0}
.header-inner{display:flex;align-items:center;justify-content:space-between}
.logo{font-weight:700;color:var(--text);text-decoration:none;font-size:18px}
.nav{display:flex;gap:16px;align-items:center}
.nav-link{color:var(--muted);text-decoration:none;font-weight:500}
.cta{background:var(--primary);color:#fff;padding:8px 14px;border-radius:10px;text-decoration:none;font-weight:600}

/* Header view switch */
#headerViewSwitch{display:flex;align-items:center;gap:8px;height:38px;padding-top:0}

.topbar{margin-top:0px;padding:0;display:flex;align-items:center;gap:16px;flex-wrap:wrap}
.filters{display:flex;gap:16px;align-items:center;flex-wrap:nowrap;overflow-x:auto;white-space:nowrap;background:transparent}
.filter-group{display:flex;flex-direction:column;gap:6px}
.filter-group label{font-size:12px;color:var(--muted)}
.filter-group select{appearance:none;padding:10px 12px;border-radius:10px;border:1px solid rgba(15,23,42,0.06);background:var(--card);width:80px}

.select-with-icon{position:relative;display:inline-flex;align-items:center}
.select-with-icon select{padding-right:36px}
.filter-icon{position:absolute;right:8px;width:20px;height:20px;pointer-events:none}

/* year controls: inline select + play button */
.year-controls { display:inline-flex; align-items:center; gap:8px; }
.play-button { background:#4caf50; border:none; color:white; padding:6px 8px; border-radius:6px; cursor:pointer; display:inline-flex; align-items:center; justify-content:center; }
.play-button[aria-pressed="true"] { background:#d32f2f; }
.play-button svg { display:block; width:16px; height:16px }

.counter{margin-left:auto;display:flex;flex-direction:column;align-items:flex-end}
.topbar-actions{display:flex;align-items:center;gap:12px;position:relative;margin-left:auto}
.filters-toggle{display:none;align-items:center;justify-content:center;width:44px;height:44px;border-radius:50%;border:none;background:#4caf50;color:#fff;cursor:pointer;box-shadow:0 6px 16px rgba(15,23,42,0.18)}
.filters-toggle svg{width:20px;height:20px;display:block}
.counter span{font-weight:700;color:#4caf50;font-size:18px}
.counter small{font-size:12px;color:var(--muted)}

.layout{display:grid;grid-template-columns:3fr 1fr;gap:20px;height:calc(100vh - 200px - 96px);margin-top:18px}
.map-panel{height:100%;border-radius:12px;box-shadow:0 6px 18px rgba(15,23,42,0.08);overflow:hidden}
#map{height:100%}
.details{background:var(--card);padding:20px;border-radius:12px;box-shadow:0 6px 18px rgba(15,23,42,0.06);overflow:auto}
.details h2{margin-top:0;margin-bottom: 6px;}
.details-header{display:block}
.details-count{margin-top:6px}



/* Info icon (small help circle) */
.info-icon{display:inline-flex;align-items:center;justify-content:center;width:20px;height:20px;border-radius:50%;border:1px solid rgba(15,23,42,0.08);color:var(--muted);font-weight:600;text-decoration:none}
.info-icon:hover{background:var(--primary);color:#fff;border-color:var(--primary)}

/* Responsive - Tablet (1200px and below) */
@media (max-width:1200px){
  .layout{grid-template-columns:1fr;gap:16px;height:calc(100vh - 220px - 96px)}
  .container{padding:0 18px}
  .topbar{gap:6px;padding:0;flex-direction:column-reverse;align-items:stretch}
  .filters{gap:12px;display:none;margin-left:18px}
  .topbar.filters-open .filters{display:flex;flex-wrap:wrap}
  .filter-group select{width:100px}
  .ms-toggle{min-width:120px;font-size:13px}
  #headerViewSwitch{gap:6px}
  .counter{margin-left:0;flex-direction:row;align-items:center;justify-content:flex-start;width:100%}
  .topbar-actions{width:100%;justify-content:flex-start;padding-left:18px}
  .filters-toggle{display:inline-flex;position:absolute;right:18px;top:50%;transform:translateY(-50%)}
  .counter span{font-size:16px}
  .details{position:fixed;bottom:0;left:0;right:0;width:100%;max-height:80px;border-radius:18px 18px 0 0;padding:12px 20px;overflow:hidden;transition:max-height 0.3s ease-in-out;box-shadow:0 -2px 16px rgba(15,23,42,0.10);z-index:50}
  .map-panel,.list-panel{height:calc(100vh - 220px - 96px)}
  .map-panel{max-height:calc(100vh - 220px - 96px)}
  #map{max-height:calc(100vh - 220px - 96px)}
  .list-panel{max-height:calc(100vh - 220px - 96px);overflow:auto;column-width: auto;}
  .details.expanded{max-height:60vh;overflow:auto;-webkit-overflow-scrolling:touch}
  .details::before{content:'';display:block;width:36px;height:5px;background:#e0e0e0;border-radius:3px;margin:0 auto 8px}
  .details h2{margin:0 0 8px 0;font-size:16px}
  .details-header{display:flex;align-items:center;justify-content:space-between;gap:12px}
  .details-meta{display:flex;flex-direction:column;gap:2px}
  .details-count{margin-top:0;text-align:right;white-space:nowrap}
  .map-panel{z-index:1}
  #map{position:relative;z-index:1}
  .leaflet-control-zoom{display:none}
}

/* Responsive - Mobile */
@media (max-width:900px){
  .layout{grid-template-columns:1fr;height:calc(100vh - 220px - 146px);}
  .counter{align-items:flex-start}
  .filters{flex-wrap:wrap}
  .map-panel{min-height:60vh}
  #map{min-height:60vh}
  .map-panel{max-height:calc(100vh - 220px - 96px)}
  #map{max-height:calc(100vh - 220px - 96px)}
  .list-panel{max-height:calc(100vh - 220px - 96px);overflow:auto;column-width: auto !important;}
  .details{z-index:200}
  .leaflet-control-zoom{display:none}
}

/* Active filters area above map */
.map-panel{height:100%;border-radius:12px;box-shadow:0 6px 18px rgba(15,23,42,0.08);overflow:hidden;position:relative}

/* Filter badge on toggle button */
.filter-badge{display:none;position:absolute;bottom:-2px;right:-2px;background:#d32f2f;color:#fff;border-radius:50%;min-width:18px;height:18px;font-size:10px;font-weight:700;align-items:center;justify-content:center;border:2px solid var(--card)}
.filter-badge.active{display:flex}

/* Leaflet controls minor override to match aesthetic */
.leaflet-container{background:#e6f7f7}
.leaflet-control-zoom a{background:rgba(255,255,255,0.9);border-radius:8px}

/* View switch (Map / List) */
.view-switch-group{display:flex;flex-direction:column;gap:6px}
.view-switch{display:flex;align-items:center;gap:8px;height:38px;padding-top:8px;}
.vs-label{font-size:13px;color:var(--muted)}
.switch{position:relative;display:inline-block;width:44px;height:24px}
.switch input{opacity:0;width:0;height:0}
.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:#ddd;border-radius:24px;transition:.2s}
.slider:before{position:absolute;content:"";height:18px;width:18px;left:3px;top:3px;background:white;border-radius:50%;transition:.2s;box-shadow:0 1px 3px rgba(0,0,0,0.2)}
/* .switch input:checked + .slider{background:var(--primary)} */
.switch input:checked + .slider:before{transform:translateX(20px)}

/* List panel styles: occupies same area as map, flows into columns if long */
.list-panel{padding:18px;overflow:auto}
.list-panel .region{break-inside:avoid-column;margin-bottom:18px}
.list-panel .region h3{margin:0 0 10px 0;color:var(--primary);font-size:14px}
.list-type-icon{width:12px;height:12px;display:inline-block;margin-bottom: -3px;margin-left: 3px;}
.x-small{font-size:10px;color:var(--text)}
.small{font-size:12px;color:var(--text)}

/* Use CSS columns to add columns when content overflows vertically */
.list-panel{column-width:200px;column-gap:18px}

/* Show/hide map vs list using body data attribute */
body[data-view="list"] #map{display:none}
body[data-view="list"] .list-panel{display:block}
body[data-view="map"] .list-panel{display:none}

/* Ensure map and list take full height of panel */
#map, .list-panel{height:100%}

/* remove underline from country links */
.country-link{color:var(--text);text-decoration:none}

/* Selected country styling */
.country-link.selected{color:#eeeaef;font-weight:900; background-color:#9c27b0; border: 1px solid #9c27b0; border-radius: 4px; padding: 2px 4px;}

/* Selected country styling for details panel */
.selected-country{color: #9c27b0;}

/* Custom multi-select with checkboxes (single-line toggle + dropdown) */
.multi-select{position:relative;display:inline-block}
.ms-toggle{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:10px;border:1px solid rgba(15,23,42,0.06);background:var(--card);min-width:160px;cursor:pointer}
.ms-toggle{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.ms-toggle:after{content:"â–¾";margin-left:auto;color:var(--muted);font-size:12px}
.ms-dropdown{position:absolute;left:0;top:calc(100% + 8px);background:var(--card);border:1px solid rgba(15,23,42,0.06);box-shadow:0 6px 18px rgba(15,23,42,0.08);border-radius:8px;padding:8px;z-index:60;min-width:220px;max-height:240px;overflow:auto}
.ms-option{display:flex;align-items:center;gap:8px;padding:6px 8px;border-radius:6px;cursor:pointer}
.ms-option:hover{background:rgba(15,23,42,0.02)}
.ms-option input{width:16px;height:16px}
.ms-option span{font-size:13px;color:var(--text)}

/* icon inside ms-option */
.ms-option-icon{width:18px;height:18px;display:inline-block;margin-left:6px;margin-right:6px}

/* Make filter groups display inline (single line) but labels above controls */
.filters{align-items:center}
.filter-group{display:flex;flex-direction:column;align-items:flex-start;gap:6px;min-width:140px}
.filter-group label{font-size:12px;color:var(--muted)}

@media (max-width:900px){
  .filter-group{flex-direction:column;align-items:flex-start}
  .ms-toggle{min-width:140px}
}
